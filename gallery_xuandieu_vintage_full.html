<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gallery Vintage — Thơ Xuân Diệu</title>
<style>
:root{
  --paper:#f3e8d3; /* warm paper */
  --card:#fff7ec;
  --ink:#3b2f2f; /* brown ink */
  --accent:#b97a20; /* warm accent */
  --muted:#8b6b53;
  --radius:14px;
}
html,body{height:100%;margin:0;}
body{
  background: linear-gradient(180deg,var(--paper), #efe2c7);
  color:var(--ink);
  font-family: Georgia, "Times New Roman", Times, serif;
  -webkit-font-smoothing:antialiased;
  padding:20px;
}
.container{max-width:980px;margin:0 auto;}
.header{display:flex;gap:14px;align-items:center;margin-bottom:18px;}
.logo{
  width:76px;height:76px;border-radius:12px;
  background:linear-gradient(135deg,#ffe8a8,#ffd79a);
  display:flex;align-items:center;justify-content:center;
  font-weight:700;color:#5b3b1a;font-size:26px;
  box-shadow: 0 6px 14px rgba(60,40,20,0.12);
  border:1px solid rgba(0,0,0,0.05);
}
.title h1{margin:0;font-size:1.6rem;letter-spacing:0.6px;}
.meta{color:var(--muted);margin-top:6px;font-size:0.95rem;}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:20px;}
.card{background:var(--card);padding:14px;border-radius:var(--radius);
  box-shadow:0 8px 20px rgba(60,40,20,0.06);border:1px solid rgba(0,0,0,0.03);
  display:flex;gap:12px;align-items:flex-start;}
.ill{width:120px;flex:0 0 120px;}
.content{flex:1;}
.titleCard{font-weight:700;margin-bottom:6px;color:var(--ink);}
.excerpt{color:var(--ink);line-height:1.6;min-height:3.6em;margin-bottom:8px;font-size:1rem;}
.controls{display:flex;gap:8px;align-items:center;}
.btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:10px;border:none;cursor:pointer;font-family:inherit;}
.btn.secondary{background:transparent;color:var(--ink);border:1px solid rgba(0,0,0,0.06);}
.small{font-size:0.85rem;color:var(--muted);margin-left:auto;}
.line{opacity:0;transform:translateY(6px);transition:opacity .36s ease, transform .36s ease;color:var(--ink);}
.line.show{opacity:1;transform:translateY(0);}

/* Vintage map block */
.mapCard{margin-top:22px;padding:16px;border-radius:12px;background:linear-gradient(180deg,#fff3de,#f6ead0);box-shadow:0 8px 20px rgba(60,40,20,0.04);border:1px solid rgba(0,0,0,0.04);}
.mapTitle{font-weight:700;margin:0 0 8px 0;color:var(--ink);}
.mapWrap{display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap;}
.vmap{flex:1;min-width:300px;border-radius:10px;overflow:hidden;border:1px solid rgba(0,0,0,0.06);background:linear-gradient(180deg,#efe3c9,#f7eedf);padding:10px;}
.legend{width:220px;flex:0 0 220px;background:transparent;padding:8px;border-radius:10px;font-size:0.95rem;color:var(--muted);}
.popup{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:var(--card);padding:14px;border-radius:12px;box-shadow:0 30px 60px rgba(30,20,10,0.25);display:none;z-index:999;border:1px solid rgba(0,0,0,0.06);max-width:92%;max-height:80%;overflow:auto;}
.popup img{max-width:100%;height:auto;border-radius:8px;margin-bottom:8px;border:1px solid rgba(0,0,0,0.04);}
.popup .poem{color:var(--ink);line-height:1.6;}
.popup .close{display:inline-block;margin-top:10px;background:var(--muted);color:#fff;padding:6px 10px;border-radius:8px;border:none;cursor:pointer;}

/* footer */
footer{margin-top:18px;color:var(--muted);font-size:0.95rem;}

/* responsive */
@media (max-width:780px){.grid{grid-template-columns:1fr}.legend{width:100%;order:2}.vmap{order:1} .ill{display:none}}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="logo">XD</div>
    <div class="title">
      <h1>Gallery Vintage — Thơ Xuân Diệu</h1>
      <div class="meta">Phiên bản demo: trích đoạn thơ, minh hoạ cổ điển, bản đồ hành trình Xuân Diệu.</div>
    </div>
  </div>

  <div class="grid">
    <!-- Card 1: Vội vàng -->
    <div class="card">
      <div class="ill" aria-hidden>
        <!-- vintage watercolor sun SVG -->
        <svg viewBox="0 0 120 120" width="120" height="120" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="sun art">
          <rect width="120" height="120" rx="12" fill="#fff8ef"/>
          <g transform="translate(10,10)" fill="none" stroke="#c27b2a" stroke-width="1.5">
            <circle cx="44" cy="36" r="18" fill="#ffd89b" stroke="rgba(0,0,0,0.06)"/>
            <path d="M8 92 Q44 20 80 92" stroke="#e8c28a" stroke-width="4" fill="none" stroke-linecap="round"/>
            <path d="M18 78 Q30 72 40 78" stroke="#d6b17f" stroke-width="2" fill="#e9ddb7"/>
          </g>
        </svg>
      </div>
      <div class="content">
        <div class="titleCard">Vội vàng — (trích)</div>
        <div class="excerpt" id="e1"></div>
        <div class="controls">
          <button class="btn" onclick="reveal(1)">Xem thơ</button>
          <button class="btn secondary" onclick="resetCard(1)">Đặt lại</button>
          <div class="small">Nhấn hoặc chạm để hiện từng dòng</div>
        </div>
      </div>
    </div>

    <!-- Card 2: Yêu -->
    <div class="card">
      <div class="ill" aria-hidden>
        <svg viewBox="0 0 120 120" width="120" height="120" xmlns="http://www.w3.org/2000/svg">
          <rect width="120" height="120" rx="12" fill="#fff6f6"/>
          <g transform="translate(12,8)">
            <path d="M36 28 C36 18 56 14 64 28 C72 14 92 18 92 28 C92 54 36 80 36 80 C36 80 -20 54 -20 28 C-20 18 0 14 8 28 C16 14 36 18 36 28 Z" fill="#ffd6df" stroke="#b97a6a" stroke-width="1"/>
            <circle cx="18" cy="90" r="4" fill="#b97a20"/>
          </g>
        </svg>
      </div>
      <div class="content">
        <div class="titleCard">Yêu — (trích)</div>
        <div class="excerpt" id="e2"></div>
        <div class="controls">
          <button class="btn" onclick="reveal(2)">Xem thơ</button>
          <button class="btn secondary" onclick="resetCard(2)">Đặt lại</button>
          <div class="small">Trải nghiệm thị giác</div>
        </div>
      </div>
    </div>

    <!-- Card 3: Biển -->
    <div class="card">
      <div class="ill" aria-hidden>
        <svg viewBox="0 0 120 120" width="120" height="120" xmlns="http://www.w3.org/2000/svg">
          <rect width="120" height="120" rx="12" fill="#f7fff8"/>
          <g transform="translate(10,12)">
            <path d="M0 64 Q24 20 48 64 T96 64" stroke="#6faecf" stroke-width="6" fill="none" stroke-linecap="round"/>
            <circle cx="88" cy="26" r="10" fill="#ffd89b"/>
          </g>
        </svg>
      </div>
      <div class="content">
        <div class="titleCard">Biển — (trích)</div>
        <div class="excerpt" id="e3"></div>
        <div class="controls">
          <button class="btn" onclick="reveal(3)">Xem thơ</button>
          <button class="btn secondary" onclick="resetCard(3)">Đặt lại</button>
          <div class="small">Đọc từng câu</div>
        </div>
      </div>
    </div>

    <!-- Card 4: Tương tư chiều -->
    <div class="card">
      <div class="ill" aria-hidden>
        <svg viewBox="0 0 120 120" width="120" height="120" xmlns="http://www.w3.org/2000/svg">
          <rect width="120" height="120" rx="12" fill="#fff7ee"/>
          <g transform="translate(10,8)">
            <circle cx="60" cy="36" r="18" fill="#ffdc9a"/>
            <path d="M0 88 Q36 30 72 88 T120 88" stroke="#d9b08a" stroke-width="6" fill="none"/>
          </g>
        </svg>
      </div>
      <div class="content">
        <div class="titleCard">Tương tư chiều — (trích)</div>
        <div class="excerpt" id="e4"></div>
        <div class="controls">
          <button class="btn" onclick="reveal(4)">Xem thơ</button>
          <button class="btn secondary" onclick="resetCard(4)">Đặt lại</button>
          <div class="small">Nhẹ nhàng, cổ điển</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Vintage map -->
  <div class="mapCard">
    <h3 class="mapTitle">Thông tin tour — Bản đồ hành trình Xuân Diệu</h3>
    <div class="mapWrap">
      <div class="vmap" id="vmap" role="img" aria-label="bản đồ vintage">
        <!-- Inline vector "vintage map" -->
        <svg id="mapSVG" viewBox="0 0 800 420" width="100%" height="320" xmlns="http://www.w3.org/2000/svg" style="background:#fbf3e5;border-radius:8px;">
          <!-- stylized coast/land shapes -->
          <defs>
            <filter id="grain"><feTurbulence baseFrequency="0.8" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0.1"/></filter>
          </defs>
          <rect width="800" height="420" fill="#f6ead0"/>
          <g id="mapLayer" transform="translate(0,0)">
            <path d="M0 220 C80 180 160 260 260 220 C360 180 460 260 560 230 C660 200 760 240 800 220 L800 420 L0 420 Z" fill="#efe1c7" stroke="#e3cfa6" stroke-width="2"/>
            <path d="M0 120 C120 80 240 140 360 120 C480 100 600 140 720 120 C760 114 800 120 800 120 L800 0 L0 0 Z" fill="#efe6d2" stroke="#e3c9a3" stroke-width="1.2" opacity="0.9"/>
            <!-- decorative compass -->
            <g transform="translate(720,300) scale(0.9)">
              <circle cx="0" cy="0" r="36" fill="#fff3de" stroke="#d6b88a"/>
              <path d="M0 -28 L6 0 L0 28 L-6 0 Z" fill="#b97a20"/>
            </g>
          </g>

          <!-- Marker: Tuy Phuoc (approx left side) -->
          <g id="marker1" transform="translate(220,200)" style="cursor:pointer;">
            <circle r="14" fill="#ffd77a" stroke="#b97a20" stroke-width="2"/>
            <text x="24" y="6" font-family="Georgia, serif" font-size="14" fill="#6b4a2e">Tuy Phước</text>
          </g>

          <!-- Marker: Hanoi (approx right side) -->
          <g id="marker2" transform="translate(580,120)" style="cursor:pointer;">
            <rect x="-12" y="-14" width="36" height="28" rx="6" fill="#d8f0ff" stroke="#4a90c2" stroke-width="2"/>
            <text x="28" y="6" font-family="Georgia, serif" font-size="14" fill="#4a6b7a">Hà Nội</text>
          </g>

          <!-- faint old-paper texture overlay -->
          <g opacity="0.08">
            <rect width="800" height="420" fill="url(#)" filter="url(#grain)"/>
          </g>
        </svg>
      </div>

      <div class="legend">
        <strong>Hướng dẫn</strong>
        <p>Chạm (hoặc click) vào các biểu tượng trên bản đồ để mở popup: mỗi điểm gồm ảnh minh hoạ (vẽ) và trích thơ liên quan.</p>
        <ul>
          <li>🌞 Tuy Phước — Quê hương Xuân Diệu</li>
          <li>📖 Hà Nội — Nơi ông sáng tác</li>
        </ul>
        <p style="margin-top:12px;color:var(--muted)"><em>Gợi ý:</em> Bạn có thể sử dụng bản đồ này trong tour thực địa; mỗi điểm có thể gắn QR dẫn tới card thơ.</p>
      </div>
    </div>
  </div>

  <footer>
    <p>Phiên bản demo do nhóm thực hiện. Để cập nhật trích đoạn đầy đủ, dán văn bản vào mảng `excerpts` trong file HTML.</p>
  </footer>
</div>

<!-- Popup container -->
<div id="popup" class="popup" role="dialog" aria-hidden="true">
  <img id="popImg" src="" alt="Artwork" />
  <div class="poem" id="popPoem"></div>
  <button class="close" onclick="closePopup()">Đóng</button>
</div>

<script>
// Excerpts (short lines)
const excerpts = {
  1: ["Tôi muốn tắt nắng đi", "Cho màu đừng nhạt mất;", "Tôi muốn buộc gió lại", "Cho hương đừng bay đi."],
  2: ["Yêu là chết ở trong lòng một ít,", "Là vùi thây nhau một chút, hoang tàn."],
  3: ["Biển! Tôi thương kẻ ở giữa trời biển,", "Sóng về mang theo tiếng nhớ bờ xa."],
  4: ["Chiều bỗng nhớ người như thể đã quen,", "Bóng đi vội vàng trong nắng ngả nghiêng."]
};

function renderCard(id){
  const container = document.getElementById('e' + id);
  container.innerHTML = '';
  const lines = excerpts[id] || ["[Chưa có trích đoạn]"];
  lines.forEach(() => {
    const d = document.createElement('div');
    d.className = 'line';
    container.appendChild(d);
  });
  // fill text later when revealed to allow animation
  const children = container.querySelectorAll('.line');
  lines.forEach((ln,i) => { children[i].textContent = ln; });
}

[1,2,3,4].forEach(renderCard);

function reveal(id){
  const container = document.getElementById('e' + id);
  const lines = Array.from(container.querySelectorAll('.line'));
  lines.forEach(l => l.classList.remove('show'));
  lines.forEach((l,i) => setTimeout(()=> l.classList.add('show'), i*600));
}
function resetCard(id){
  const container = document.getElementById('e' + id);
  const lines = Array.from(container.querySelectorAll('.line'));
  lines.forEach(l => l.classList.remove('show'));
}

// Popup handling with artwork (SVG illustrations embedded as data URLs or inline)
const popup = document.getElementById('popup');
const popImg = document.getElementById('popImg');
const popPoem = document.getElementById('popPoem');

function openPopup(point){
  // Use simple inline SVG art as data URI for artwork (vintage sketch style)
  if(point === 'tuyphuoc'){
    const svg = `data:image/svg+xml;utf8,${encodeURIComponent(`
      <svg xmlns="http://www.w3.org/2000/svg" width="800" height="480" viewBox="0 0 800 480">
        <rect width="800" height="480" fill="#fbf3e5"/>
        <g fill="#d6b88a">
          <rect x="60" y="320" width="680" height="120" rx="8" fill="#efe1c7"/>
          <path d="M40 300 Q120 220 240 300 T760 300" fill="#efe6d2"/>
        </g>
        <g transform="translate(40,40)" fill="#b97a20" opacity="0.9">
          <path d="M20 200 Q80 120 140 200 T260 200" stroke="#b97a20" stroke-width="4" fill="none"/>
          <circle cx="120" cy="80" r="36" fill="#ffd89b"/>
        </g>
        <text x="24" y="420" font-family="Georgia" font-size="20" fill="#6b4a2e">Quê hương: Tuy Phước (vẽ minh hoạ)</text>
      </svg>
    `)}`;
    popImg.src = svg;
    popPoem.innerHTML = `<p style="margin:0 0 8px 0;"><strong>Vội vàng — (trích)</strong></p><div style="line-height:1.6;padding:6px 0;color:#3b2f2f">Tôi muốn tắt nắng đi<br>Cho màu đừng nhạt mất;<br>Tôi muốn buộc gió lại<br>Cho hương đừng bay đi.</div>`;
  } else if(point === 'hanoi'){
    const svg = `data:image/svg+xml;utf8,${encodeURIComponent(`
      <svg xmlns="http://www.w3.org/2000/svg" width="800" height="480" viewBox="0 0 800 480">
        <rect width="800" height="480" fill="#fbf3e5"/>
        <g fill="#d6b88a">
          <rect x="40" y="320" width="720" height="120" rx="8" fill="#efe1c7"/>
          <path d="M60 300 Q140 220 260 300 T740 300" fill="#efe6d2"/>
        </g>
        <g transform="translate(60,36)" fill="#4a90c2" opacity="0.9">
          <rect x="120" y="60" width="120" height="60" rx="6" fill="#d8f0ff"/>
          <path d="M20 220 Q100 140 180 220 T340 220" stroke="#8fb9d8" stroke-width="4" fill="none"/>
        </g>
        <text x="24" y="420" font-family="Georgia" font-size="20" fill="#6b4a2e">Hà Nội (vẽ minh hoạ)</text>
      </svg>
    `)}`;
    popImg.src = svg;
    popPoem.innerHTML = `<p style="margin:0 0 8px 0;"><strong>Yêu — (trích)</strong></p><div style="line-height:1.6;padding:6px 0;color:#3b2f2f">Yêu là chết ở trong lòng một ít,<br>Là vùi thây nhau một chút, hoang tàn.</div>`;
  }
  popup.style.display = 'block';
  popup.setAttribute('aria-hidden','false');
}

function closePopup(){ popup.style.display='none'; popup.setAttribute('aria-hidden','true'); }

// Attach event listeners to map markers
document.addEventListener('DOMContentLoaded', ()=>{
  const m1 = document.getElementById('marker1');
  const m2 = document.getElementById('marker2');
  m1.addEventListener('click', (e)=>{ e.stopPropagation(); openPopup('tuyphuoc'); });
  m2.addEventListener('click', (e)=>{ e.stopPropagation(); openPopup('hanoi'); });
  // close popup by clicking outside
  document.addEventListener('click', (e)=>{ if(e.target === popup) closePopup(); });
});
</script>
</body>
</html>
